!function(e,t,o){"use strict";function i(e,t){var o=!1;return function(){o||(e.call(),o=!0,setTimeout(function(){o=!1},t))}}function n(){Z&&lt.hide(),e(t).on("touchstart.testMouse",function(){e(t).off("touchstart.testMouse"),J=!0,lt.addClass("mobile")}),W.off().on("click",P.toggle),_.off().on("click","a",E.click),G&&lt.addClass("msie"),lt.off().on("click","img",function(e){e.stopPropagation()}),e(t.body).append(lt),z=t.documentElement}function s(e,t,o){1==t?(X.css({transform:"translateX(25%)",transition:".2s",opacity:0}),setTimeout(function(){S(D)},200)):-1==t&&(X.css({transform:"translateX(-25%)",transition:".2s",opacity:0}),setTimeout(function(){S(O)},200)),1==o?R.prop("checked",!0):-1==o&&R.prop("checked",!1)}function a(e){var o,i=t.createElement("p").style,n=["ms","O","Moz","Webkit"];if(""==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),o=n.length;o--;)if(""==i[n[o]+e])return n[o]+e}function r(t){var o=t.keyCode,i=T.keys;return e.inArray(o,i.close)>=0&&A()||e.inArray(o,i.next)>=0&&!T.single&&h(O)||e.inArray(o,i.prev)>=0&&!T.single&&h(D)||!0}function l(e,t,o){1==o?h(O):-1==o&&h(D)}function u(){var e="pbPrevBtn"==this.id?D:O;return h(e),!1}function c(e){M=K,K=e,L=Q[e][0],D=(K||(T.loop?Q.length:0))-1,O=(K+1)%Q.length||(T.loop?0:-1)}function h(e){if(!T.loop){var t=K==Q.length-1&&e==O,o=0==K&&e==D;if(t||o)return}S(e)}function d(){var t=Q[K][0],o=e("<a>").prop("href",Q[K][0])[0].search?"&":"?";return t+=o+"vq=hd720&wmode=opaque",e("<iframe>").prop({scrolling:"no",frameborder:0,allowTransparency:!0,src:t}).attr({webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0})}function p(){if(j.off(ot).removeClass("change"),T.counter){try{var e=T.counter.replace("A",K+1).replace("B",Q.length)}catch(t){T.counter="(A/B)",p()}Y.find(".counter").text(e)}T.title&&Y.find(".title").html("<span>"+Q[K][1]+"</span>")}function f(){lt.addClass("error"),X[0].src=$,nt.onerror=null}function m(e){function t(){clearTimeout(i),o.off(ot).css({transition:"none"}),lt.removeClass("video"),"video"==H?(X[0].src=$,B.addClass("prepare"),lt.addClass("video")):X.prop({src:L,"class":"prepare"}),setTimeout(function(){X.add(B).removeAttr("style").removeClass("prepare"),lt.removeClass("pbHide next prev"),setTimeout(function(){X.add(B).on(ot,v),G&&v()},0)},50)}var o,i;i=setTimeout(t,2e3),q.fadeOut(300,function(){lt.removeClass("pbLoading"),q.removeAttr("style")}),lt.addClass("pbHide"),X.add(B).removeAttr("style").removeClass("zoomable"),e||"video"!=k[M].rel?o=X:(o=B,X.addClass("prepare")),e||G?t():o.on(ot,t)}function v(){X.add(B).off(ot).addClass("zoomable"),"video"==H?B.removeClass("pbHide"):W&&T.autoplay&&P.play(),x&&"function"==typeof x.callback&&x.callback.apply(k[K])}function g(o,i,n){if(n)return!1;if("video"==H){var s=B.data("zoom")||1;if(s+=i/10,.5>s)return!1;B.data("zoom",s).css({width:624*s,height:351*s})}else{var s=X.data("zoom")||1,a=X[0].getBoundingClientRect();s+=i/10,.1>s&&(s=.1),it(function(){X.data("zoom",s).css({transform:"scale("+s+")"})}),a.height>z.clientHeight||a.width>z.clientWidth?e(t).on("mousemove.photobox",w):(e(t).off("mousemove.photobox"),X[0].style[et]="50% 50%")}return!1}function b(e,t){e.preventDefault(),e.stopPropagation();var o,i=x.thumbsList;i.css("height",i[0].clientHeight+10*t),o=Y[0].clientHeight/2,U[0].style.cssText="margin-top: -"+o+"px; padding: "+o+"px 0;",_.hide().show(0)}function w(e){var t=e.clientY/z.clientHeight*(z.clientHeight+200)-100,o=t/z.clientHeight*100,i=e.clientX/z.clientWidth*100,n=i.toFixed(2)+"% "+o.toFixed(2)+"%";it(function(){X[0].style[et]=n})}function y(){clearTimeout(P.autoPlayTimer),e(t).off("mousemove.photobox"),nt.onload=function(){},nt.src=st.src=at.src=L}function A(){function t(){""!=lt[0].className&&(lt.removeClass("show pbHide error pbLoading"),X.removeAttr("class").removeAttr("style").off().data("zoom",1),X[0].src=$,Y.find(".title").empty(),Z&&setTimeout(function(){lt.hide()},200),T.hideFlash&&e("iframe, object, embed").css("visibility","visible"))}return lt.hasClass("show")?(y(),B.find("iframe").prop("src","").empty(),C.prototype.setup(),ut.clear(),lt.removeClass("on video").addClass("pbHide"),K=-1,X.on(ot,t),G&&t(),setTimeout(function(){x=null},1e3),setTimeout(t,500),void("function"==typeof T.afterClose&&T.afterClose(lt))):!1}var C,x,T,k,L,M,H,D,O,E,z,P,S,F,X,B,I,N,R,Y,j,q,W,_,U,Q=[],K=-1,G=!("placeholder"in t.createElement("input")),Z=function(){var t=e("<p>")[0];return t.style.cssText="pointer-events:auto",!t.style.pointerEvents}(),J=!1,V=e(),$="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",et=a("transformOrigin"),tt=a("transition"),ot="transitionend webkitTransitionEnd oTransitionEnd otransitionend",it=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},nt={},st=new Image,at=new Image,rt={single:!1,beforeShow:null,afterClose:null,loop:!0,thumb:null,thumbs:!0,thumbAttr:"data-src",counter:"(A/B)",title:!0,autoplay:!1,time:3e3,history:!1,hideFlash:!0,zoomable:!0,wheelNextPrev:!0,keys:{close:[27,88,67],prev:[37,80],next:[39,78]}},lt=e('<div id="pbOverlay">').append(R=e('<input type="checkbox" id="pbThumbsToggler" checked hidden>'),q=e('<div class="pbLoader"><b></b><b></b><b></b></div>'),I=e('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",u),N=e('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",u),U=e('<div class="pbWrapper">').append(X=e("<img>"),B=e("<div>")),F=e('<div id="pbCloseBtn">').on("click",A)[0],W=e('<div id="pbAutoplayBtn">').append(e('<div class="pbProgress">')),Y=e('<div id="pbCaption">').append('<label for="pbThumbsToggler" title="thumbnails on/off"></label>',j=e('<div class="pbCaptionText">').append('<div class="title"></div><div class="counter">'),_=e("<div>").addClass("pbThumbs")));e.fn.photobox=function(t,o,i){return this.each(function(){var s,a=e(this).data("_photobox");return a?("destroy"===t&&a.destroy(),this):("string"!=typeof t&&(t="a"),"prepareDOM"===t?(n(),this):(s=e.extend({},rt,o||{}),x=new C(s,this,t),e(this).data("_photobox",x),void(x.callback=i)))})},C=function(o,i,n){this.options=e.extend({},o),this.target=n,this.selector=e(i||t),this.thumbsList=null;var s=this.imageLinksFilter(this.selector.find(n));this.imageLinks=s[0],this.images=s[1],this.init()},C.prototype={init:function(){var e=this;this.selector.one("mouseenter.photobox",this.target,function(){e.thumbsList=E.generate.apply(e)}),this.selector.on("click.photobox",this.target,function(t){t.preventDefault(),e.open(this)}),this.observerTimeout=null,G||1!=this.selector[0].nodeType||this.observeDOM(this.selector[0],this.onDOMchanges.bind(this))},onDOMchanges:function(){var e=this;clearTimeout(this.observerTimeout),e.observerTimeout=setTimeout(function(){var t,o=e.imageLinksFilter(e.selector.find(e.target)),i=0,n=!1;if(e.imageLinks.length!=o[0].length){if(e.imageLinks=o[0],e.images=o[1],x&&e.selector==x.selector)for(Q=e.images,k=e.imageLinks,t=Q.length;t--;)Q[t][0]==L&&(n=!0);e.thumbsList=E.generate.apply(e),_.html(e.thumbsList),e.images.length&&L&&e.options.thumbs&&(i=e.thumbsList.find('a[href="'+L+'"]').eq(0).parent().index(),-1==i&&(i=0),E.changeActive(i,0))}},50)},open:function(t){var o=e.inArray(t,this.imageLinks);return-1==o?!1:(T=this.options,Q=this.images,k=this.imageLinks,x=this,this.setup(1),lt.on(ot,function(){lt.off(ot).addClass("on"),S(o,!0)}).addClass("show"),G&&lt.trigger("MSTransitionEnd"),!1)},imageLinksFilter:function(t){var o,i=this,n=[],s={};return[t.filter(function(){var t,a=e(this),r="";return s.content=a[0].getAttribute("title")||"",i.options.thumb&&(t=a.find(i.options.thumb)[0]),i.options.thumb&&t||(t=a.find("img")[0]),t&&(o=t.getAttribute("data-pb-captionlink"),r=t.getAttribute(i.options.thumbAttr)||t.getAttribute("src"),s.content=t.getAttribute("alt")||t.getAttribute("title")||""),o&&(o=o.split("["),2==o.length?(s.linkText=o[0],s.linkHref=o[1].slice(0,-1)):(s.linkText=o,s.linkHref=o),s.content+=' <a href="'+s.linkHref+'">'+s.linkText+"</a>"),n.push([a[0].href,s.content,r]),!0}),n]},observeDOM:function(){var e=o.MutationObserver||o.WebKitMutationObserver,t=o.addEventListener;return function(o,i){if(e){var n=this,s=new e(function(e){(e[0].addedNodes.length||e[0].removedNodes.length)&&i(n)});s.observe(o,{childList:!0,subtree:!0})}else t&&(o.addEventListener("DOMNodeInserted",i.bind(n),!1),o.addEventListener("DOMNodeRemoved",i.bind(n),!1))}}(),setup:function(n){var a=n?"on":"off";T.thumbs&&(J||_[a]("mouseenter.photobox",E.calc)[a]("mousemove.photobox",E.move)),n?(X.css({transition:"0s"}).removeAttr("style"),lt.show(),_.html(this.thumbsList).trigger("mouseenter.photobox"),T.thumbs?lt.addClass("thumbs"):(R.prop("checked",!1),lt.removeClass("thumbs")),this.images.length<2||T.single?lt.removeClass("thumbs hasArrows hasCounter hasAutoplay"):(lt.addClass("hasArrows hasCounter"),T.time>1e3?(lt.addClass("hasAutoplay"),T.autoplay?P.progress.start():P.pause()):lt.removeClass("hasAutoplay")),T.hideFlash&&e("iframe, object, embed").css("visibility","hidden")):e(o).off("resize.photobox"),e(t).off("keydown.photobox")[a]({"keydown.photobox":r}),J&&(lt.removeClass("hasArrows"),U[a]("swipe",s)),T.zoomable&&(lt[a]({"mousewheel.photobox":g}),G||_[a]({"mousewheel.photobox":b})),!T.single&&T.wheelNextPrev&&lt[a]({"mousewheel.photobox":i(l,1e3)})},destroy:function(){T=this.options,this.selector.off("click.photobox",this.target).removeData("_photobox"),A()}},E=function(){var t,o,i,n,s=0,a=0,r=0,l=0,u=null;return{generate:function(){var t,o,i,n,s,a=e("<ul>"),r=[],l=this.imageLinks.size();for(s=0;l>s;s++)i=this.imageLinks[s],o=this.images[s][2],o&&(t=this.images[s][1],n=i.rel?" class='"+i.rel+"'":"",r.push("<li"+n+'><a href="'+i.href+'"><img src="'+o+'" alt="" title="'+t+'" /></a></li>'));return a.html(r.join("")),a},click:function(t){t.preventDefault(),V.removeClass("active"),V=e(this).parent().addClass("active");var o=e(this.parentNode).index();return S(o,0,1)},changeActiveTimeout:null,changeActive:function(e,t,o){if(T.thumbs){{V.index()}V.removeClass("active"),V=_.find("li").eq(e).addClass("active"),!o&&V[0]&&(clearTimeout(this.changeActiveTimeout),this.changeActiveTimeout=setTimeout(function(){var e=V[0].offsetLeft+V[0].clientWidth/2-z.clientWidth/2;t?_.delay(800):_.stop(),_.animate({scrollLeft:e},500,"swing")},200))}},calc:function(e){return o=_[0],s=o.clientWidth,a=o.scrollWidth,t=.15*s,r=_.offset().left,l=e.pageX-t-r,n=l/(s-2*t),i=(a-s)*n,_.animate({scrollLeft:i},200),clearTimeout(u),u=setTimeout(function(){u=null},200),this},move:function(e){if(!u){var i,n,l=e.pageX-t-r;0>l&&(l=0),i=l/(s-2*t),n=(a-s)*i,it(function(){o.scrollLeft=n})}}}}(),P={autoPlayTimer:!1,play:function(){P.autoPlayTimer=setTimeout(function(){S(O)},T.time),P.progress.start(),W.removeClass("play"),P.setTitle("Click to stop autoplay"),T.autoplay=!0},pause:function(){clearTimeout(P.autoPlayTimer),P.progress.reset(),W.addClass("play"),P.setTitle("Click to resume autoplay"),T.autoplay=!1},progress:{reset:function(){W.find("div").removeAttr("style"),setTimeout(function(){W.removeClass("playing")},200)},start:function(){G||W.find("div").css(tt,T.time+"ms"),W.addClass("playing")}},setTitle:function(e){e&&W.prop("title",e+" (every "+T.time/1e3+" seconds)")},toggle:function(e){e.stopPropagation(),P[T.autoplay?"pause":"play"]()}},S=function(){var e;return function(t,o,i){if(!e){if(e=setTimeout(function(){e=null},150),(!t||0>t)&&(t=0),T.loop||(N.toggleClass("pbHide",t==Q.length-1),I.toggleClass("pbHide",0==t)),"function"==typeof T.beforeShow&&T.beforeShow(k[t]),lt.removeClass("error"),K>=0&&lt.addClass(t>K?"next":"prev"),c(t),y(),B.empty(),nt.onerror=null,X.add(B).data("zoom",1),H="video"==k[t].rel?"video":"image","video"==H)B.html(d()).addClass("pbHide"),m(o);else{var n=setTimeout(function(){lt.addClass("pbLoading")},50);G&&lt.addClass("pbHide"),T.autoplay&&P.progress.reset(),nt=new Image,nt.onload=function(){nt.onload=null,D>=0&&(st.src=Q[D][0]),O>=0&&(at.src=Q[O][0]),clearTimeout(n),m(o)},nt.onerror=f,nt.src=L}j.on(ot,p).addClass("change"),(o||G)&&p(),E.changeActive(t,o,i),ut.save()}}}();var ut={save:function(){"pushState"in window.history&&decodeURIComponent(window.location.hash.slice(1))!=L&&T.history&&window.history.pushState("photobox",t.title+"-"+Q[K][1],window.location.pathname+window.location.search+"#"+encodeURIComponent(L))},load:function(){if(T&&!T.history)return!1;var t=decodeURIComponent(window.location.hash.slice(1));!t&&lt.hasClass("show")&&A(),e('a[href="'+t+'"]').trigger("click.photobox")},clear:function(){T.history&&"pushState"in window.history&&window.history.pushState("photobox",t.title,window.location.pathname+window.location.search)}};window.onpopstate=function(){var e=window.onpopstate;return function(t){e&&e.apply(this,arguments),"photobox"==t.state&&ut.load()}}(),e.event.special.swipe={setup:function(){e(this).bind("touchstart",e.event.special.swipe.handler)},teardown:function(){e(this).unbind("touchstart",e.event.special.swipe.handler)},handler:function(t){function o(){c.removeEventListener("touchmove",i),n=s=null}function i(i){i.preventDefault();var r=n-i.touches[0].pageX,h=s-i.touches[0].pageY;return Math.abs(r)>=20?(o(),l=r>0?-1:1):Math.abs(h)>=20&&(o(),u=h>0?1:-1),t.type="swipe",a.unshift(t,l,u),(e.event.dispatch||e.event.handle).apply(c,a)}var n,s,a=[].slice.call(arguments,1),r=t.originalEvent.touches,l=0,u=0,c=this;t=e.event.fix(t),1==r.length&&(n=r[0].pageX,s=r[0].pageY,this.addEventListener("touchmove",i,!1))}},!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,r=l.call(arguments,1),u=0,h=0,d=0,p=0,f=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(h=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(h=-1*d,d=0),u=0===d?h:d,"deltaY"in a&&(d=-1*a.deltaY,u=d),"deltaX"in a&&(h=a.deltaX,0===d&&(u=-1*h)),0!==d||0!==h){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,d*=v,h*=v}else if(2===a.deltaMode){var g=e.data(this,"mousewheel-page-height");u*=g,d*=g,h*=g}if(p=Math.max(Math.abs(d),Math.abs(h)),(!s||s>p)&&(s=p,i(a,p)&&(s/=40)),i(a,p)&&(u/=40,h/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/s),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=h,t.deltaY=d,t.deltaFactor=s,t.offsetX=f,t.offsetY=m,t.deltaMode=0,r.unshift(t,u,h,d),n&&clearTimeout(n),n=setTimeout(o,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function o(){s=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var n,s,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var o=r.length;o;)this.addEventListener(r[--o],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var o=r.length;o;)this.removeEventListener(r[--o],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var o=e(t)["offsetParent"in e.fn?"offsetParent":"parent"]();return o.length||(o=e("body")),parseInt(o.css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),e(t).ready(n),window._photobox={DOM:{overlay:lt},close:A,history:ut,defaults:rt}}(jQuery,document,window);
!function(a){var b=function(b,c){this.settings=c,this.checkSettings(),this.imgAnalyzerTimeout=null,this.entries=null,this.buildingRow={entriesBuff:[],width:0,aspectRatio:0},this.lastAnalyzedIndex=-1,this.yield={every:2,flushed:0},this.border=c.border>=0?c.border:c.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges(),this.offY=this.border,this.spinner={phase:0,timeSlot:150,$el:a('<div class="spinner"><span></span><span></span><span></span></div>'),intervalId:null},this.checkWidthIntervalId=null,this.galleryWidth=b.width(),this.$gallery=b};b.prototype.getSuffix=function(a,b){var c,d;for(c=a>b?a:b,d=0;d<this.suffixRanges.length;d++)if(c<=this.suffixRanges[d])return this.settings.sizeRangeSuffixes[this.suffixRanges[d]];return this.settings.sizeRangeSuffixes[this.suffixRanges[d-1]]},b.prototype.removeSuffix=function(a,b){return a.substring(0,a.length-b.length)},b.prototype.endsWith=function(a,b){return-1!==a.indexOf(b,a.length-b.length)},b.prototype.getUsedSuffix=function(a){for(var b in this.settings.sizeRangeSuffixes)if(this.settings.sizeRangeSuffixes.hasOwnProperty(b)){if(0===this.settings.sizeRangeSuffixes[b].length)continue;if(this.endsWith(a,this.settings.sizeRangeSuffixes[b]))return this.settings.sizeRangeSuffixes[b]}return""},b.prototype.newSrc=function(a,b,c){var d=a.match(this.settings.extension),e=null!=d?d[0]:"",f=a.replace(this.settings.extension,"");return f=this.removeSuffix(f,this.getUsedSuffix(f)),f+=this.getSuffix(b,c)+e},b.prototype.showImg=function(a,b){this.settings.cssAnimation?(a.addClass("entry-visible"),b&&b()):a.stop().fadeTo(this.settings.imagesAnimationDuration,1,b)},b.prototype.extractImgSrcFromImage=function(a){var b="undefined"!=typeof a.data("safe-src")?a.data("safe-src"):a.attr("src");return a.data("jg.originalSrc",b),b},b.prototype.imgFromEntry=function(a){var b=a.find("> img");return 0===b.length&&(b=a.find("> a > img")),0===b.length?null:b},b.prototype.captionFromEntry=function(a){var b=a.find("> .caption");return 0===b.length?null:b},b.prototype.displayEntry=function(b,c,d,e,f,g){b.width(e),b.height(g),b.css("top",d),b.css("left",c);var h=this.imgFromEntry(b);if(null!==h){h.css("width",e),h.css("height",f),h.css("margin-left",-e/2),h.css("margin-top",-f/2);var i=h.attr("src"),j=this.newSrc(i,e,f);h.one("error",function(){h.attr("src",h.data("jg.originalSrc"))});var k=function(){i!==j&&h.attr("src",j)};"skipped"===b.data("jg.loaded")?this.onImageEvent(i,a.proxy(function(){this.showImg(b,k),b.data("jg.loaded",!0)},this)):this.showImg(b,k)}else this.showImg(b);this.displayEntryCaption(b)},b.prototype.displayEntryCaption=function(b){var c=this.imgFromEntry(b);if(null!==c&&this.settings.captions){var d=this.captionFromEntry(b);if(null==d){var e=c.attr("alt");"undefined"==typeof e&&(e=b.attr("title")),"undefined"!=typeof e&&(d=a('<div class="caption">'+e+"</div>"),b.append(d),b.data("jg.createdCaption",!0))}null!==d&&(this.settings.cssAnimation||d.stop().fadeTo(0,this.settings.captionSettings.nonVisibleOpacity),this.addCaptionEventsHandlers(b))}else this.removeCaptionEventsHandlers(b)},b.prototype.onEntryMouseEnterForCaption=function(b){var c=this.captionFromEntry(a(b.currentTarget));this.settings.cssAnimation?c.addClass("caption-visible").removeClass("caption-hidden"):c.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.visibleOpacity)},b.prototype.onEntryMouseLeaveForCaption=function(b){var c=this.captionFromEntry(a(b.currentTarget));this.settings.cssAnimation?c.removeClass("caption-visible").removeClass("caption-hidden"):c.stop().fadeTo(this.settings.captionSettings.animationDuration,this.settings.captionSettings.nonVisibleOpacity)},b.prototype.addCaptionEventsHandlers=function(b){var c=b.data("jg.captionMouseEvents");"undefined"==typeof c&&(c={mouseenter:a.proxy(this.onEntryMouseEnterForCaption,this),mouseleave:a.proxy(this.onEntryMouseLeaveForCaption,this)},b.on("mouseenter",void 0,void 0,c.mouseenter),b.on("mouseleave",void 0,void 0,c.mouseleave),b.data("jg.captionMouseEvents",c))},b.prototype.removeCaptionEventsHandlers=function(a){var b=a.data("jg.captionMouseEvents");"undefined"!=typeof b&&(a.off("mouseenter",void 0,b.mouseenter),a.off("mouseleave",void 0,b.mouseleave),a.removeData("jg.captionMouseEvents"))},b.prototype.prepareBuildingRow=function(a){var b,c,d,e,f,g=!0,h=0,i=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,j=i/this.buildingRow.aspectRatio,k=this.buildingRow.width/i>this.settings.justifyThreshold;if(a&&"hide"===this.settings.lastRow&&!k){for(b=0;b<this.buildingRow.entriesBuff.length;b++)c=this.buildingRow.entriesBuff[b],this.settings.cssAnimation?c.removeClass("entry-visible"):c.stop().fadeTo(0,0);return-1}for(a&&!k&&"nojustify"===this.settings.lastRow&&(g=!1),b=0;b<this.buildingRow.entriesBuff.length;b++)c=this.buildingRow.entriesBuff[b],d=c.data("jg.width")/c.data("jg.height"),g?(e=b===this.buildingRow.entriesBuff.length-1?i:j*d,f=j):(e=this.settings.rowHeight*d,f=this.settings.rowHeight),i-=Math.round(e),c.data("jg.jwidth",Math.round(e)),c.data("jg.jheight",Math.ceil(f)),(0===b||h>f)&&(h=f);return this.settings.fixedHeight&&h>this.settings.rowHeight&&(h=this.settings.rowHeight),{minHeight:h,justify:g}},b.prototype.clearBuildingRow=function(){this.buildingRow.entriesBuff=[],this.buildingRow.aspectRatio=0,this.buildingRow.width=0},b.prototype.flushRow=function(a){var b,c,d,e=this.settings,f=this.border;if(d=this.prepareBuildingRow(a),c=d.minHeight,a&&"hide"===e.lastRow&&-1===c)return void this.clearBuildingRow();this.maxRowHeight.percentage?this.maxRowHeight.value*e.rowHeight<c&&(c=this.maxRowHeight.value*e.rowHeight):this.maxRowHeight.value>0&&this.maxRowHeight.value<c&&(c=this.maxRowHeight.value);for(var g=0;g<this.buildingRow.entriesBuff.length;g++)b=this.buildingRow.entriesBuff[g],this.displayEntry(b,f,this.offY,b.data("jg.jwidth"),b.data("jg.jheight"),c),f+=b.data("jg.jwidth")+e.margins;this.$gallery.height(this.offY+c+this.border+(this.isSpinnerActive()?this.getSpinnerHeight():0)),(!a||c<=this.settings.rowHeight&&d.justify)&&(this.offY+=c+this.settings.margins,this.clearBuildingRow(),this.$gallery.trigger("jg.rowflush"))},b.prototype.checkWidth=function(){this.checkWidthIntervalId=setInterval(a.proxy(function(){var a=parseInt(this.$gallery.width(),10);this.galleryWidth!==a&&(this.galleryWidth=a,this.rewind(),this.startImgAnalyzer(!0))},this),this.settings.refreshTime)},b.prototype.isSpinnerActive=function(){return null!=this.spinner.intervalId},b.prototype.getSpinnerHeight=function(){return this.spinner.$el.innerHeight()},b.prototype.stopLoadingSpinnerAnimation=function(){clearInterval(this.spinner.intervalId),this.spinner.intervalId=null,this.$gallery.height(this.$gallery.height()-this.getSpinnerHeight()),this.spinner.$el.detach()},b.prototype.startLoadingSpinnerAnimation=function(){var a=this.spinner,b=a.$el.find("span");clearInterval(a.intervalId),this.$gallery.append(a.$el),this.$gallery.height(this.offY+this.getSpinnerHeight()),a.intervalId=setInterval(function(){a.phase<b.length?b.eq(a.phase).fadeTo(a.timeSlot,1):b.eq(a.phase-b.length).fadeTo(a.timeSlot,0),a.phase=(a.phase+1)%(2*b.length)},a.timeSlot)},b.prototype.rewind=function(){this.lastAnalyzedIndex=-1,this.offY=this.border,this.clearBuildingRow()},b.prototype.hideBuildingRowImages=function(){for(var a=0;a<this.buildingRow.entriesBuff.length;a++)this.settings.cssAnimation?this.buildingRow.entriesBuff[a].removeClass("entry-visible"):this.buildingRow.entriesBuff[a].stop().fadeTo(0,0)},b.prototype.updateEntries=function(b){return this.entries=this.$gallery.find(this.settings.selector).toArray(),0===this.entries.length?!1:(this.settings.filter?this.modifyEntries(this.filterArray,b):this.modifyEntries(this.resetFilters,b),a.isFunction(this.settings.sort)?this.modifyEntries(this.sortArray,b):this.settings.randomize&&this.modifyEntries(this.shuffleArray,b),!0)},b.prototype.insertToGallery=function(b){var c=this;a.each(b,function(){a(this).appendTo(c.$gallery)})},b.prototype.shuffleArray=function(a){var b,c,d;for(b=a.length-1;b>0;b--)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return this.insertToGallery(a),a},b.prototype.sortArray=function(a){return a.sort(this.settings.sort),this.insertToGallery(a),a},b.prototype.resetFilters=function(b){for(var c=0;c<b.length;c++)a(b[c]).removeClass("jg-filtered");return b},b.prototype.filterArray=function(b){var c=this.settings;return"string"===a.type(c.filter)?b.filter(function(b){var d=a(b);return d.is(c.filter)?(d.removeClass("jg-filtered"),!0):(d.addClass("jg-filtered"),!1)}):a.isFunction(c.filter)?b.filter(c.filter):void 0},b.prototype.modifyEntries=function(a,b){var c=b?this.entries.splice(this.lastAnalyzedIndex+1,this.entries.length-this.lastAnalyzedIndex-1):this.entries;c=a.call(this,c),this.entries=b?this.entries.concat(c):c},b.prototype.destroy=function(){clearInterval(this.checkWidthIntervalId),a.each(this.entries,a.proxy(function(b,c){var d=a(c);d.css("width",""),d.css("height",""),d.css("top",""),d.css("left",""),d.data("jg.loaded",void 0),d.removeClass("jg-entry");var e=this.imgFromEntry(d);e.css("width",""),e.css("height",""),e.css("margin-left",""),e.css("margin-top",""),e.attr("src",e.data("jg.originalSrc")),e.data("jg.originalSrc",void 0),this.removeCaptionEventsHandlers(d);var f=this.captionFromEntry(d);d.data("jg.createdCaption")?(d.data("jg.createdCaption",void 0),null!=f&&f.remove()):null!=f&&f.fadeTo(0,1)},this)),this.$gallery.css("height",""),this.$gallery.removeClass("justified-gallery"),this.$gallery.data("jg.controller",void 0)},b.prototype.analyzeImages=function(b){for(var c=this.lastAnalyzedIndex+1;c<this.entries.length;c++){var d=a(this.entries[c]);if(d.data("jg.loaded")===!0||"skipped"===d.data("jg.loaded")){var e=this.galleryWidth-2*this.border-(this.buildingRow.entriesBuff.length-1)*this.settings.margins,f=d.data("jg.width")/d.data("jg.height");if(e/(this.buildingRow.aspectRatio+f)<this.settings.rowHeight&&(this.flushRow(!1),++this.yield.flushed>=this.yield.every))return void this.startImgAnalyzer(b);this.buildingRow.entriesBuff.push(d),this.buildingRow.aspectRatio+=f,this.buildingRow.width+=f*this.settings.rowHeight,this.lastAnalyzedIndex=c}else if("error"!==d.data("jg.loaded"))return}this.buildingRow.entriesBuff.length>0&&this.flushRow(!0),this.isSpinnerActive()&&this.stopLoadingSpinnerAnimation(),this.stopImgAnalyzerStarter(),this.$gallery.trigger(b?"jg.resize":"jg.complete")},b.prototype.stopImgAnalyzerStarter=function(){this.yield.flushed=0,null!==this.imgAnalyzerTimeout&&clearTimeout(this.imgAnalyzerTimeout)},b.prototype.startImgAnalyzer=function(a){var b=this;this.stopImgAnalyzerStarter(),this.imgAnalyzerTimeout=setTimeout(function(){b.analyzeImages(a)},.001)},b.prototype.onImageEvent=function(b,c,d){if(c||d){var e=new Image,f=a(e);c&&f.one("load",function(){f.off("load error"),c(e)}),d&&f.one("error",function(){f.off("load error"),d(e)}),e.src=b}},b.prototype.init=function(){var b=!1,c=!1,d=this;a.each(this.entries,function(e,f){var g=a(f),h=d.imgFromEntry(g);if(g.addClass("jg-entry"),g.data("jg.loaded")!==!0&&"skipped"!==g.data("jg.loaded"))if(null!==d.settings.rel&&g.attr("rel",d.settings.rel),null!==d.settings.target&&g.attr("target",d.settings.target),null!==h){var i=d.extractImgSrcFromImage(h);if(h.attr("src",i),d.settings.waitThumbnailsLoad===!1){var j=parseInt(h.attr("width"),10),k=parseInt(h.attr("height"),10);if(!isNaN(j)&&!isNaN(k))return g.data("jg.width",j),g.data("jg.height",k),g.data("jg.loaded","skipped"),c=!0,d.startImgAnalyzer(!1),!0}g.data("jg.loaded",!1),b=!0,d.isSpinnerActive()||d.startLoadingSpinnerAnimation(),d.onImageEvent(i,function(a){g.data("jg.width",a.width),g.data("jg.height",a.height),g.data("jg.loaded",!0),d.startImgAnalyzer(!1)},function(){g.data("jg.loaded","error"),d.startImgAnalyzer(!1)})}else g.data("jg.loaded",!0),g.data("jg.width",g.width()|g.css("width")|1),g.data("jg.height",g.height()|g.css("height")|1)}),b||c||this.startImgAnalyzer(!1),this.checkWidth()},b.prototype.checkOrConvertNumber=function(b,c){if("string"===a.type(b[c])&&(b[c]=parseFloat(b[c])),"number"!==a.type(b[c]))throw c+" must be a number";if(isNaN(b[c]))throw"invalid number for "+c},b.prototype.checkSizeRangesSuffixes=function(){if("object"!==a.type(this.settings.sizeRangeSuffixes))throw"sizeRangeSuffixes must be defined and must be an object";var b=[];for(var c in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(c)&&b.push(c);for(var d={0:""},e=0;e<b.length;e++)if("string"===a.type(b[e]))try{var f=parseInt(b[e].replace(/^[a-z]+/,""),10);d[f]=this.settings.sizeRangeSuffixes[b[e]]}catch(g){throw"sizeRangeSuffixes keys must contains correct numbers ("+g+")"}else d[b[e]]=this.settings.sizeRangeSuffixes[b[e]];this.settings.sizeRangeSuffixes=d},b.prototype.retrieveMaxRowHeight=function(){var b={};if("string"===a.type(this.settings.maxRowHeight))this.settings.maxRowHeight.match(/^[0-9]+%$/)?(b.value=parseFloat(this.settings.maxRowHeight.match(/^([0-9])+%$/)[1])/100,b.percentage=!1):(b.value=parseFloat(this.settings.maxRowHeight),b.percentage=!0);else{if("number"!==a.type(this.settings.maxRowHeight))throw"maxRowHeight must be a number or a percentage";b.value=this.settings.maxRowHeight,b.percentage=!1}if(isNaN(b.value))throw"invalid number for maxRowHeight";return b.percentage?b.value<100&&(b.value=100):b.value>0&&b.value<this.settings.rowHeight&&(b.value=this.settings.rowHeight),b},b.prototype.checkSettings=function(){if(this.checkSizeRangesSuffixes(),this.checkOrConvertNumber(this.settings,"rowHeight"),this.checkOrConvertNumber(this.settings,"margins"),this.checkOrConvertNumber(this.settings,"border"),"nojustify"!==this.settings.lastRow&&"justify"!==this.settings.lastRow&&"hide"!==this.settings.lastRow)throw'lastRow must be "nojustify", "justify" or "hide"';if(this.checkOrConvertNumber(this.settings,"justifyThreshold"),this.settings.justifyThreshold<0||this.settings.justifyThreshold>1)throw"justifyThreshold must be in the interval [0,1]";if("boolean"!==a.type(this.settings.cssAnimation))throw"cssAnimation must be a boolean";if("boolean"!==a.type(this.settings.captions))throw"captions must be a boolean";if(this.checkOrConvertNumber(this.settings.captionSettings,"animationDuration"),this.checkOrConvertNumber(this.settings.captionSettings,"visibleOpacity"),this.settings.captionSettings.visibleOpacity<0||this.settings.captionSettings.visibleOpacity>1)throw"captionSettings.visibleOpacity must be in the interval [0, 1]";if(this.checkOrConvertNumber(this.settings.captionSettings,"nonVisibleOpacity"),this.settings.captionSettings.nonVisibleOpacity<0||this.settings.captionSettings.nonVisibleOpacity>1)throw"captionSettings.nonVisibleOpacity must be in the interval [0, 1]";if("boolean"!==a.type(this.settings.fixedHeight))throw"fixedHeight must be a boolean";if(this.checkOrConvertNumber(this.settings,"imagesAnimationDuration"),this.checkOrConvertNumber(this.settings,"refreshTime"),"boolean"!==a.type(this.settings.randomize))throw"randomize must be a boolean";if("string"!==a.type(this.settings.selector))throw"selector must be a string";if(this.settings.sort!==!1&&!a.isFunction(this.settings.sort))throw"sort must be false or a comparison function";if(this.settings.filter!==!1&&!a.isFunction(this.settings.sort)&&"string"!==a.type(this.settings.filter))throw"filter must be false, a string or a filter function"},b.prototype.retrieveSuffixRanges=function(){var a=[];for(var b in this.settings.sizeRangeSuffixes)this.settings.sizeRangeSuffixes.hasOwnProperty(b)&&a.push(parseInt(b,10));return a.sort(function(a,b){return a>b?1:b>a?-1:0}),a},b.prototype.updateSettings=function(b){this.settings=a.extend({},this.settings,b),this.checkSettings(),this.border=this.settings.border>=0?this.settings.border:this.settings.margins,this.maxRowHeight=this.retrieveMaxRowHeight(),this.suffixRanges=this.retrieveSuffixRanges()},a.fn.justifiedGallery=function(c){return this.each(function(d,e){var f=a(e);f.addClass("justified-gallery");var g=f.data("jg.controller");if("undefined"==typeof g){if("undefined"!=typeof c&&null!==c&&"object"!==a.type(c))throw"The argument must be an object";g=new b(f,a.extend({},a.fn.justifiedGallery.defaults,c)),f.data("jg.controller",g)}else if("norewind"===c)g.hideBuildingRowImages();else{if("destroy"===c)return void g.destroy();g.updateSettings(c),g.rewind()}g.updateEntries("norewind"===c)&&g.init()})},a.fn.justifiedGallery.defaults={sizeRangeSuffixes:{},rowHeight:120,maxRowHeight:"200%",margins:1,border:-1,lastRow:"nojustify",justifyThreshold:.75,fixedHeight:!1,waitThumbnailsLoad:!0,captions:!0,cssAnimation:!1,imagesAnimationDuration:500,captionSettings:{animationDuration:500,visibleOpacity:.7,nonVisibleOpacity:0},rel:null,target:null,extension:/\.[^.\\/]+$/,refreshTime:100,randomize:!1,sort:!1,filter:!1,selector:"> a, > div:not(.spinner)"}}(jQuery);
$(document).ready(function(){$('#gallery').photobox('a',{ time:0 });$('div#gallery').justifiedGallery({waitThumbnailsLoad: false, margins: 5, lastRow: 'justify'});$("img").error(function(){var e=$(this).attr("src");window.console&&console.log("reload image "+e);var n=e.indexOf("&random=");n>-1&&(e=e.substring(0,n)),n=e.indexOf("?random="),n>-1&&(e=e.substring(0,n)),e=e.indexOf("?")>-1?e+"&random="+(new Date).getTime():e+"?random="+(new Date).getTime(),$(this).attr("src",e)});
function repos(imgs) {
    imgs.each(function (i, o) {
        var imgw = $(o).width()
        var boxw = $(o).parent('a').width()
        var imgh = $(o).height()
        var boxh = $(o).parent('a').outerHeight()
        if (imgw > boxw) {
            $(o).css('left', ((imgw / 2) - (boxw / 2)) * -1)
        } else {
            $(o).css('left', 0)
        }
        if (imgh > boxh) {
            $(o).css('top', ((imgh / 2) - (boxh / 2)) * -1)
        } else {
            $(o).css('top', 0)
        }
    })
}
$(window).resize(function () {repos($('ul#gallery img'));});$('ul#gallery img').load(function(){repos($('ul#gallery img'));});repos($('ul#gallery img'));
$('.slick-slider').slick({
  infinite: true,
  speed: 300,
  slidesToShow: 4,
//   lazyLoad: 'progressive',
  autoplay: true,
  variableWidth: true,
  responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 3
      }
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 2
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1
      }
    }
  ]
});
$('.slick-slider-class').slick();
});